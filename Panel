#!/bin/bash
# Install essential packages
apt-get update
apt-get install -y netplan.io openssh-server nginx docker.io

# Optional: configure Netplan if you have a custom IPv4
# Example /etc/netplan/01-netcfg.yaml:
cat <<EOF > /etc/netplan/01-netcfg.yaml
network:
  version: 2
  ethernets:
    ens3:
      dhcp4: no
      addresses:
        - YOUR_IPV4_ADDRESS/24
      gateway4: YOUR_GATEWAY
      nameservers:
        addresses:
          - 1.1.1.1
          - 8.8.8.8
EOF

netplan apply

# Enable and start services
systemctl enable ssh
systemctl enable nginx
systemctl start nginx
apt install tmate -y
tmate
